<view class="container">
  <view class="top-banner"></view>

  <view class="custom-nav" style="padding-top: {{statusBarHeight}}px;">
    <view class="nav-content">
      <view class="back-btn" bindtap="goBack">
        <view class="back-arrow"></view>
      </view>
      <text class="nav-title">ä¸ªäººä¸­å¿ƒ</text>
    </view>
  </view>

  <view class="main-content" style="margin-top: {{statusBarHeight + 44}}px;">
    <view class="profile-card glass-effect" bindtap="openEdit">
      <view class="user-main">
        <view class="avatar-wrap">
          <button class="avatar-btn" open-type="chooseAvatar" catchtap="stopBubble" bindchooseavatar="onChooseAvatar">
            <image class="user-avatar" src="{{userInfo.avatarUrl}}"></image>
            <view class="camera-tag">ğŸ“·</view>
          </button>
        </view>
        
        <view class="user-text">
          <view class="name-line">
            <text class="u-name">{{userInfo.nickName}}</text>
            <text class="u-edit">âœ ç¼–è¾‘</text>
          </view>
          <view class="u-details">
            <text>{{userInfo.campus || 'æ ¡åŒºæœªå¡«'}} | {{userInfo.realName || 'å§“åæœªå¡«'}}</text>
            <text>å­¦å·ï¼š{{userInfo.studentId || 'æœªç»‘å®š'}}</text>
            <text>å®¿èˆï¼š{{userInfo.dormBuilding || '-'}}å·æ¥¼ {{userInfo.dormRoom || '-'}}å®¤</text>
          </view>
        </view>
      </view>
    </view>

    <view class="menu-card glass-effect">
      <view class="card-header">
        <view class="v-line"></view>
        <text class="card-title">æˆ‘çš„æœåŠ¡</text>
      </view>
      <view class="grid-box">
        <block wx:for="{{menuList1}}" wx:key="name">
          <view class="grid-item" bindtap="handleMenuClick" data-name="{{item.name}}">
            <image src="{{item.icon}}" class="grid-icon" mode="aspectFit"></image>
            <text class="grid-label">{{item.name}}</text>
          </view>
        </block>
      </view>
    </view>

    <view class="menu-card glass-effect">
      <view class="card-header">
        <view class="v-line"></view>
        <text class="card-title">ç³»ç»Ÿå·¥å…·</text>
      </view>
      <view class="grid-box">
        <block wx:for="{{menuList2}}" wx:key="name">
          <view class="grid-item" bindtap="handleMenuClick" data-name="{{item.name}}">
            <image src="{{item.icon}}" class="grid-icon" mode="aspectFit"></image>
            <text class="grid-label">{{item.name}}</text>
          </view>
        </block>
      </view>
    </view>
  </view>

  <view class="modal-mask" wx:if="{{showEditModal}}">
    <view class="modal-box">
      <view class="modal-head">ä¿®æ”¹åŸºæœ¬ä¿¡æ¯</view>
      <scroll-view scroll-y class="modal-form">
        <view class="f-group"><text>çœŸå®å§“å</text><input value="{{tempData.realName}}" data-f="realName" bindinput="onModalInput"/></view>
        <view class="f-group">
          <text>æ ¡åŒº</text>
          <picker mode="selector" range="{{campusOptions}}" bindchange="onCampusChange">
            <view class="p-val">{{tempData.campus || 'è¯·é€‰æ‹©'}}</view>
          </picker>
        </view>
        <view class="f-group"><text>å­¦å·</text><input value="{{tempData.studentId}}" data-f="studentId" bindinput="onModalInput"/></view>
        <view class="f-row">
          <view class="f-half"><text>æ¥¼æ ‹</text><input value="{{tempData.dormBuilding}}" data-f="dormBuilding" bindinput="onModalInput" placeholder="5æ ‹"/></view>
          <view class="f-half"><text>æˆ¿å·</text><input value="{{tempData.dormRoom}}" data-f="dormRoom" bindinput="onModalInput" placeholder="302"/></view>
        </view>
      </scroll-view>
      <view class="m-btns">
        <button class="b-cancel" bindtap="closeModal">å–æ¶ˆ</button>
        <button class="b-save" bindtap="saveInfo">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
<view class="container">
  <view class="top-banner"></view>

  <view class="main-content">
    <view class="profile-section glass-effect" bindtap="openEdit">
      <view class="user-card">
        <view class="avatar-section">
          <button class="avatar-btn" open-type="chooseAvatar" catchtap="stopBubble" bindchooseavatar="onChooseAvatar">
            <image class="user-avatar" src="{{userInfo.avatarUrl}}"></image>
            <view class="camera-icon">ğŸ“·</view>
          </button>
        </view>
        
        <view class="user-info">
          <view class="name-row">
            <text class="user-name">{{userInfo.nickName}}</text>
            <text class="edit-btn">âœ ä¿®æ”¹èµ„æ–™</text>
          </view>
          <view class="info-list">
            <text class="info-text">{{userInfo.campus || 'æ ¡åŒºæœªå¡«'}} | {{userInfo.realName || 'å§“åæœªå¡«'}}</text>
            <text class="info-text">å­¦å·ï¼š{{userInfo.studentId || 'æœªç»‘å®š'}}</text>
            <text class="info-text">å®¿èˆï¼š{{userInfo.dormBuilding || '-'}}å·æ¥¼ {{userInfo.dormRoom || '-'}}å®¤</text>
          </view>
        </view>
      </view>
    </view>

    <view class="menu-card glass-effect">
      <view class="card-header">
        <view class="v-line"></view>
        <text class="card-title">æˆ‘çš„æœåŠ¡</text>
      </view>
      <view class="grid-container">
        <block wx:for="{{menuList1}}" wx:key="name">
          <view class="menu-item triple" bindtap="handleMenuClick" data-name="{{item.name}}">
            <image src="{{item.icon}}" class="menu-icon" mode="aspectFit"></image>
            <text class="menu-name">{{item.name}}</text>
          </view>
        </block>
      </view>
    </view>

    <view class="menu-card glass-effect">
      <view class="card-header">
        <view class="v-line"></view>
        <text class="card-title">ç³»ç»Ÿå·¥å…·</text>
      </view>
      <view class="grid-container">
        <block wx:for="{{menuList2}}" wx:key="name">
          <view class="menu-item triple" bindtap="handleMenuClick" data-name="{{item.name}}">
            <image src="{{item.icon}}" class="menu-icon" mode="aspectFit"></image>
            <text class="menu-name">{{item.name}}</text>
          </view>
        </block>
      </view>
    </view>
  </view>

  <view class="modal-mask" wx:if="{{showEditModal}}">
    <view class="modal-box">
      <view class="modal-title">å®Œå–„ä¸ªäººèµ„æ–™</view>
      <scroll-view scroll-y class="modal-form">
        <view class="form-group"><text>çœŸå®å§“å</text><input value="{{tempData.realName}}" data-f="realName" bindinput="onModalInput"/></view>
        <view class="form-group">
          <text>æ ¡åŒº</text>
          <picker mode="selector" range="{{campusOptions}}" bindchange="onCampusChange">
            <view class="picker-val">{{tempData.campus || 'è¯·é€‰æ‹©æ ¡åŒº'}}</view>
          </picker>
        </view>
        <view class="form-group"><text>å­¦å·</text><input value="{{tempData.studentId}}" data-f="studentId" bindinput="onModalInput"/></view>
        <view class="form-row">
          <view class="half"><text>æ¥¼æ ‹</text><input value="{{tempData.dormBuilding}}" data-f="dormBuilding" bindinput="onModalInput" placeholder="å¦‚:5æ ‹"/></view>
          <view class="half"><text>æˆ¿é—´å·</text><input value="{{tempData.dormRoom}}" data-f="dormRoom" bindinput="onModalInput" placeholder="å¦‚:302"/></view>
        </view>
      </scroll-view>
      <view class="modal-btns">
        <button class="btn-cancel" bindtap="closeModal">å–æ¶ˆ</button>
        <button class="btn-confirm" bindtap="saveInfo">ä¿å­˜æ›´æ”¹</button>
      </view>
    </view>
  </view>
</view>